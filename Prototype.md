## Milestone 5 Report - Methods and Architecture to accomplish the design requirements, with lessons learned and room for improvement

### 1. Reiteration of the privacy crisis
(This section is mostly a more detailed, academic and comprehensive reiteration of the most prominent privacy flaws of current online job board solutions that have motivated our implementation, most of which were already covered in M3 and M4. If you think it is clear enough about where our design requirements come from, feel free to skip this part. If you need clarifications on how to start the site and access some of its features, see section 4.)

The invention of our web application builds upon the phenomenon that nowaday popular websites with the function of an online job board, such as Indeed and Linkedin, are increasingly abandoning the responsibility of safeguarding the resumes that average job seekers and applicants upload to the site and entrust with them. It is common practice for these sites to not only gain profit from the subscription fees from applicants and employers (commonly HRs of individual companies), but to also earn income from personalized advertisement services based on personal information analysis or even directly selling our personal information to other companies or third-parties, exploiting the enormous resume database that they have built during decades. Note that the selling of personal information does not necessarily take the form of a single-time exchange of resume bundles and money. For example, on one of the Indeed official websites that target the job-posting employers, it claims to offer a service that, with an employer account with paid subscription, it is possible to filter resumes based on keywords of skill, experience or location and download them in batches from Indeed’s enormous resume database. Although masked by the appearance of a paid service, this is essentially still trading personal information for money considering the list of personal identifiers included in a resume. Names, phone number, email, location and postal code, and rich context of the applicant’s past professional experience or even hobbies for people who prefer to show them to the company that they apply to are easily disclosed to the resume buyer during this process. Moreover, Indeed does not appear to make a claim about verifying the identities of such resume buyers, not to mention that even the trusted buyers have chances of secondary selling or leaking their resume to other malicious agents. Overall, making profit from uploaded resumes is an extremely irresponsible behavior that creates identification, secondary use, increased accessibility and appropriation privacy threats.

Another major privacy issue that these job board websites create comes from the difference of likeliness of uploading fake information between the employer and the applicant users. It is widely known that scammers regularly post fake job opportunities to lure new victimes, however, a legit company also often has incentives to do so. It might aim to build a database of talents for recruiting the right people, and/or to make their current business look more valuable and competitive, as extra vacant positions and recruit posts usually suggest a quick expansion. On the other hand, applicants rarely have any reason to put fake information (probably apart from some bragging about their personal abilities) on their resume, as that will only lose them the job during the interview for using a fake identity. Such ecosystems of job boards usually cause the following scenario: after an applicant submits the resume and applies to a fake job, the company or scammer knows everything about the applicant, while the applicant gets nothing but an email signaling refusal or scam. However, Indeed does not try to address such privacy imbalance between employers and applicants. Furthermore, it only provides more privacy services to the employers that pay for subscriptions, such as email masking, so that they are capable of remaining fully anonymous during communications. As of the large population of applicants, Indeed not only provides zero protection to their personal information, but also sets their resume as “searchable” in its default user privacy settings. In other words, any user of Indeed can potentially search for one’s resume information should the resume owner not notice a few lines buried in a long privacy policy. This certainly increases accessibility of personal information of its users, and directly goes against the fairness, limiting disclosure and openness principles of PIPEDA and GDPR.

Finally, the Indeed website exhibits almost all the common flaws of existing commercial websites: excess first-party and third-party trackers (like Google Analytics) tracking user activities and metadata generated on the website, unlimited collection and unspecified retention period of messages sent and resumes uploaded specified in their privacy policies, and no encryption for emails and messages sent through their services. (Notably, the last flaw is not true for Linkedin.) These details show no consideration of privacy by design and no compliance with existing regulatory frameworks by violating purpose limitation, data minimization and storage limitation principles of the GDPR.

### 2. Design Requirements
Our plan is to design a prototype of a privacy-enhanced version of existing job board websites. In order to combat the privacy-violating flaws of existing solutions, after intensive trials during the implementation, we decided that our web application should have the following properties:

- First of all, it should still resemble the basic architecture of a job board website that targets both employers posting new jobs and applicants seeking jobs. The pages and link relationships between these pages should imitate the current most successful online job board implementations, but due to limited time and effort possible, non-essential and likely privacy-breaching features, like UI design, resume and ability assessment and resume search should not be included. We have had discussions about whether we want the online messaging system, but we will likely need real-time messaging with end-to-end encryption to support the inherent privacy by design goals, which would eventually end as a huge amount of workflow, so we decided to separate the communication between employers and applicants to their private communications in the current prototype.

- Our website should have no trackers and backend programs that collects, stores and analyzes user personal information, activities and metadata that they hand over to us or generate during the visit of our site.

- Our design should eliminate, or create tremendous obstacles for, large-scale identification of users, so that employer users that come mainly for scamming or building databases of resumes rather than real recruiting will not consider our website as a good option. Furthermore, we aim to ensure that users will not have to trust us at all for breaking this rule, and privacy-disrespecting updates that might be added to the current architecture will give users clear warnings about us not respecting their privacy anymore (after which they can choose to abandon our solution before continue to disclosing more information). This might seem radical, but there has been evidence showing that Indeed did not begin as privacy destroyers. In the end, it became too hard for Indeed to perfectly insist its privacy principles over the huge potential for profit. In order to resist such unstoppable corruption during potential business development, we need a resolute baseline to prevent internal or external corruption.

- We should establish a verification process for employers that want to post jobs on our website to at least block entry of complete scammers, advertisers and data brokers to the best we could.

- Users should have complete control to access, modify and delete the information that they submit to us. Our website should not reveal login information or applicant profiles to any other user or third party without explicit permission from the user. In our case, the only explicit permissions are the applicant deciding to apply to a job and the employer showing interest to an applicant.

- We should have an encryption algorithm that will safeguard our data in the database. If unauthorized access to the database happens, it will ensure that things that we promise to keep confidential do not easily become meaningful information in the hands of attackers.

- We should have a privacy policy page that is not absurdly long, while clearly listing what data we collect, how we store and process personal data, and promise to comply with current privacy regulations.

### 3. Tools and Architectures
#### 3.1 Overall Framework
We used Django, a free and open-source, Python-based web framework for all of our backend development, and a combination of HTML code and some very basic Django support for the frontend components. This framework has a series of protection measures against common web attacks like cross site scripting, cross site request forgery and SQL injection, and is a suitable option for both development and security needs. Initially we intended to use Windows SQL Server for a server-client architecture database, but since the database designer kept having problems opening a certain port to the rest of the members, causing database connections to fail constantly, we decided to use the default option of Django instead, which is sqlite, an all-in-one database taking the form of a single file.

Under the directory m5/backend, every folder, apart from m5/backend/backend (which contains the basic backend settings that drive our project) and m5/backend/templates (which is a html template that other webpages inherit from), is a sub-app that is responsible for a certain aspect of our whole job board.

#### 3.2 Basic Login
m5/backend/usermanagement is responsible for the user signup, login, logout aspect. The fundamental design of this part does not really differ from that of regular job board sites: when an account is created, we ask for your email, ask you to set a password and confirm it, ask whether you would like an account as employer or applicant, and send you an email to verify that it is a real person behind the signup process. You also use your email and password to login. However, a major difference with Indeed is that Indeed will also prompt for your real name, phone number and postal code to profile you while we are not requiring any of those. Although we still require your email, it is possible to use an anonymous email or email masking service to eliminate the only source of identity leak in our signup process, leading to a semi-anonymous experience. Such a recommendation is also documented in our privacy policy.

Initially we thought about a more radical approach of allowing signup and login with just an alias and a password for complete applicant user anonymity, but this clearly puts our registration system under the danger of scripted attempts to make new accounts. Eventually we decided to still request an email verification.

#### 3.3 Employer Functionalities
m5/backend/employer gives employers abilities to handle their business on our website, while m5/backend/jobposting is the helper app containing functions that enables employers to manage, view, create, modify or delete their job posts.

After you are logged in as an employer, it is not possible yet for you to create new posts and view incoming applications. You will have to first go through the process of “employer verification” to prove that you come from a legitimate, registered company. Although this eliminates the possibility of individuals seeking temporary or long-term teammates or assistants for their work, we believe that this will be a solid barrier against pure scammers or data brokers trying to gather resumes using the job board.

##### 3.3.1 Employer Verification
In the employer verification process, the responsible personnel from the company must provide a list of their company information, including company name, address, description, business contact information, logo and relevant files proving that they are registered in a certain country and that they are allowed to legitimately run their business at the moment. Combined with official information from respective countries (for example, registered company information on https://www.canada.ca/en/services/business/research/directoriescanadiancompanies.html for Canadian companies), these files will undergo manual review, and legitimate companies are granted the access to create new job posts and start receiving applications. Since this is obviously a function with lots of technicalities and is not fully achievable with the current group, we have only implemented the functions to allow employer’s submission and review of the process, and granting job poster privileges is simulated by either manually set employer user to “verified” through the Django administrative tools as a superuser or visiting /employer/verification/{username}/confirm. A separate application, an encrypted file system and a group of experienced job reviewers will be required in the future for this feature to function at its best.

##### 3.3.2 Posting a new job and assessing applicants
Once the job poster access is obtained, an employer can start to post a job by filling in required fields of the corresponding form. Next, average applicants will be able to find the job with the search page (the first page you access upon visiting the site), and employers can view the applicant profiles of every applicant that applied. It is important to know that, taking inspiration from Attribute-Based Credentials, only information necessary for the employer to assess the abilities of the applicant, such as past jobs, education and skills are present on the applicant profile, while the name is very likely an alias. There is no field that has to contain a personal identifier as opposed to regular resumes submitted on other job boards, so that the employer is usually unable to save their resume and identify the applicants in batches at this stage. It might still be possible to identify an individual through aggregation, but this is hardly a trivial job that can be automated and parallelized, and it is possible for k people with highly similar backgrounds to construct k-anonymity. With severely decreasing efficiency of collecting and analyzing personal identifiers, conventional resume collectors without the purpose of recruiting people are likely to stay away from our solution to the job board.

After seeing a potentially fit applicant for the position, the employer can click the “Interest” button on the corresponding page. Our application will send both users an email including the email address of the opposite agent in the application, and they can initiate a personal conversation to know more about each other and organize an interview. At this step, if the employer receives an email address that is easily connected to an identity, then aggregation and efficient collection of email addresses for advertisement or scamming can still happen, but these efforts can be shattered with our previous solution of using an anonymous email service. Contemplating scammers can still potentially go over the whole process to cause loss to an applicant, but this is a far more arduous process than before, and most of them are likely eliminated during the Employer Verification process.

Currently, we are setting a 3-months active time for each new job post, and the posts are automatically deleted as they become inactive. Outdated posts often have similar functions as an intentional fake post for a company, and our measure will ensure less trash posts exist on the website. In further implementations, it will be reasonable to let the employers set a personalized active time or renew it manually.

#### 3.4 Applicant Functionalities
m5/backend/profiles contains functions that applicants need to manage their profiles and the encryption/decryption processes to secure these profiles in the database. Even if applicants do not login, they are free to browse current job posts on the site and check job details. Note that we have not refined our searching functions to match jobs similar to your keywords, so you might need to search for a strict substring and strictly meet all necessary requirements of a job for this version of the app. After applicants login, they unlock abilities of creating applicant profiles and applying to jobs with these profiles.

##### 3.4.1 Creating applicant profiles
It is possible and recommended to use an alias to create an applicant file. To ensure maximum privacy, it is also recommended to not include any personal identifier like driver’s license number, postal code or phone number in any applicant profile field. If you need to include third-party sites that include your work, it would be best to configure that site so that you are not traceable from there either. However, by the point that a third-party site with your work is visited, the efficiency for common website scrapers aiming for resumes and emails is already a failure, so this is not a threat to user identities that we primarily consider. Semi-identifiers like the city you are currently living in, the universities you went to, or the companies you worked for previously might be necessary for a decent knowledge about the applicant and for a HR personnel to be interested in you.

##### 3.4.2 Applicant profile encryption
When a user creates an applicant profile, all of the fields entered are encrypted on the client before they are sent to the backend. This is done using symmetric encryption with a key that is generated upon the user logging in and stored in local storage. This key is obtained from the SHA-256 hash of the user's password. Specifically, the CryptoJS library and AES-256 are used to perform this encryption. Whenever a user wants to view or edit an applicant profile, they get the encrypted fields from the backend and then unencrypt them locally using the same key. The backend is never able to see the unencrypted fields or the user's key.

When a user applies to a job post, they must choose one of their applicant profiles to apply with. This information needs to be made available to the employer of the job that they are applying for, so encrypting it with the user's key would not be sufficient. To solve this, we make it so that each employer possesses a public and private key pair. They must enter their own public key during the employer verification process, which is stored in the database once their verification is approved. Their public key is used to encrypt a copy of the applicant profile. First, the user receives the fields which are encrypted with their own key and decrypts them locally as before. They then take that employer's public key and use it to encrypt the fields of their profile using the JSEncrypt library and RSA encryption. These newly encrypted fields are then sent to the backend, which creates a new instance of applicant profile using them and attaches it to the user's application. The employer can then see all the applications for a particular job post that they created. When viewing a profile, an employer can enter their private key to be stored in their browser's session storage if they haven't done so during the current session. This private key is then used to unencrypt the fields of the applicant profiles locally on the employer's browser, once again using the JSEncrypt library.

Performing the encryption of the applicant profiles in this way ensures that this information is only made available to the people that need it. The user can see all of their profiles at any time and the employers that they apply to can only see the profile that the user selected for their application. Any admins or superusers of our platform are not able to ever see this information while it is stored in the database, ensuring that this information remains private.

##### 3.4.3 Applying for jobs
Most of the privacy components and considerations during the process of applying for jobs are covered in section 3.3.2. After the employer shows interest to an applicant, the applicant also receives the email address of the employer. If the employer has not set up an automated script to send each interested applicant, then it is likely that the applicant will be responsible for starting the communication.

#### 3.5 Limiting Collection, Processing and Storage
We are committed to not using cookies and trackers, either first-party or third-party, to collect, process and store user activities and metadata generated when the user visits our site. We do not sell collected personal information or use them for advertising or analytical purposes. When you decide to delete your job posting or applicant profile, it is immediately wiped from our database and we do not keep them for an extended period of time.

#### 3.6 Privacy Policy
We have a clear, concise, meaningful and relatively short privacy policy at m5/backend/privacy_policy/templates/privacy_policy to show compliance with current regulatory frameworks and to tutor our users for extra privacy while using our website. It might not be as legal, professional and waterproof as those of huge job boards, but we commit more than that in our words. Check the content out!


### 4. Running and using the site
To install all necessary dependencies, navigate to m5/backend and run:

pip install -r requirements. txt

To access the website, navigate to m5/backend and run:

python manage.py runserver

To manage data and verify an employer as an admin, :

cd into dir where manage.py is located

python3 manage.py createsuperuser

python3 manage.py makemigrations

python3 manage.py migrate

after creating admin user, go to localhost:8000/admin

you will be able to see Users table under USER_MANGEMENT. (2nd one is the employer user account)

Click them and scroll down to see the checkbox for verified. We can manually verify the employer users.

Signup, login and logout options exist at your top-right corner.

As an employer or applicant user, manage your job posts or applicant profile by clicking on your user icon on the left of your email address in the top-right corner.

As an employer, note that only image files are allowed when uploading the company icon during the employer verification process.

You can find our privacy policy at the bottom of the form of our starting job search page. To return to the job search page, click on the “Privacy-Enhanced Job Board” link at the top-left corner of any page.

### 5. Lessons learned and possible improvements
#### 5.1 Lessons learned
It is quite obvious that our job board website still has lots of flaws compared to the most popular working solutions on many aspects. For example, resume search, online interview and building a peer connection is not among the available features. However, if these features were to be added, although not completely impossible to maintain privacy, it would require much more sophisticated architecture and much more implementation time to ensure the privacy of users, and the anonymous usage will end in vain. Meanwhile, our design that favors applicants but creates certain inconvenience for employers can definitely repel resume collectors, but some recruiters may cease using our site for similar reasons. We have learned that privacy by design often implies intense brainstorming, careful design, arduous work, cutting down certain utilities, and repetitive trial-and-error. However, in an era of surveillance capitalism with highly deprived privacy rights, it is more important than ever to think about the redesign of existing applications as early as possible exactly due to the difficulty of doing that. We cannot afford to lose everything that deserves to be a secret.

We learned a lot about the current situation of resume and personal information trade, fake jobs, and consequences of job scamming and identity theft. It is often a much more private choice to directly apply on the company website than to apply through job boards (provided that the company site is not a trap of scammers).

We learned about how to implement the basic architecture of an online job board, how to encrypt and decrypt data using built-in libraries, and how to control information visibility within a web app.

We learned that network topology can become a huge obstacle when it comes to setting up servers for others to connect remotely, and coordination with the Internet Service Provider might be necessary prior to doing that.

#### 5.2 Possible improvements
The most immediate improvement we would likely implement are choices for employers to refuse applicants or mark them as pending, while giving applicants the ability to cancel their application. These are quite essential features of job boards that we did not implement due to limited time and low connectivity to privacy.

For the application to work like a real job board, we should establish a client-server architecture database and enforce access controls for agents that access it. Even for the sqlite database we could have set up OS access restrictions and single file encryption for certain users to gain extra security, but it was not carried out due to the need of grading and the subsequent change of environment.

It might also be a good idea to attach built-in anonymous email services 

We have proved that we are capable of doing asymmetric encryption with the applicant profiles, and have not encrypted the login credentials, the files coming from companies, and job posts. Although job posts show the minimal necessity to be encrypted as it can be accessed even for visitors who have not logged in, it will not hurt and earn extra trust from companies by encrypting all of them.

UI components, refined search engine, source of income, company assessment standards, … Many aspects less related to privacy but important for the utility of the website still awaits implementation.
